<div id="types" class="col-xs-12">
  <h2>Play types for <%= @email %>:</h2>

  <button <%= 'class="disabled"'.html_safe if no_games %>
          id="<%= @sample ? 'update-sample-types' : 'update-displayed-types' %>">
    Update stats
  </button>

  <table id="typeTable"
         class="tablesorter tablesorter-blue<%= ' empty' if no_games %>">
    <thead>
      <tr>
        <th>Include in stats?</th>
        <th>Play type</th>
        <th>Games played</th>
        <th>Average score</th>
        <th>High score</th>
        <th>Low score</th>
        <th>Final rate</th>
      </tr>
    </thead>
    <tbody>
      <% @play_type_summary.each do |type_stats| %>
        <% type_abbr = type_stats['play_type'] %>
        <tr class="<%= type_abbr %>">
          <td>
            <input id="<%= type_abbr %>-box" type="checkbox"
                   <%= 'checked="checked"'.html_safe if @play_types.include?(type_abbr) %>>
          </td>
          <td><%= PLAY_TYPES[type_abbr] %></td>
          <td><%= type_stats['games_count'] %></td>
          <td><%= number_to_currency(type_stats['average_score']) %></td>
          <td><%= number_to_currency(type_stats['max'], precision: 0) %></td>
          <td><%= number_to_currency(type_stats['min'], precision: 0) %></td>
          <% if (fr = type_stats['final_rate']).nil? %>
            <td></td>
          <% else %>
            <td><%= number_to_percentage(fr.to_f * 100, precision: 1) %></td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
